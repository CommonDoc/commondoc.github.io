<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
  Nodes &ndash; CommonDoc
</title>
    <link rel="stylesheet" href="static/style.css"/>
    
  <link rel="stylesheet" href="static/highlight.css"/>
  <script src="static/highlight.js"></script>

  </head>
  <body>
    
  <h1 class="doc-title">CommonDoc Â» Nodes</h1>
  <article>
    <aside>
      <ol class="toc"><li><a href="overview.html">Overview</a></li><li><a href="formats.html">Formats</a></li><li><a href="nodes.html">Nodes</a></li><li><a href="defining-nodes.html">Defining Nodes</a></li><li><a href="operations.html">Operations</a></li><li><a href="files.html">Files</a></li><li><a href="errors.html">Errors</a></li><li><a href="libraries.html">Libraries</a></li><li><a href="extensions.html">Extensions</a></li><li><a href="future-work.html">Future Work</a></li></ol>
    </aside>
    <main class="codex-section">
      <p></p><p>A node is a subtree of a document. Nodes range from atomic nodes like text nodes
and images to containing nodes like paragraphs, bold text nodes, or section
nodes.</p><h1 id="metadata">Metadata</h1><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-meta</code><code class="codex-lambda-list">(pairs)</code><div class="codex-docstring">Create a metadata table from a list of pairs. If the list is empty, return an
empty metadata table.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">get-meta</code><code class="codex-lambda-list">(node key)</code><div class="codex-docstring">Find the value corresponding to <code class="codex-param">key</code> in the node's metadata. If not
found, return <code>NIL</code>.</div></div><div class="codex-doc-node codex-operator codex-macro"><code class="codex-name">do-meta</code><code class="codex-lambda-list">((key value node) &amp;body body)</code><div class="codex-docstring">Iterate over the keys and values of a node's metadata.</div></div><h1 id="basic-classes">Basic Classes</h1><div class="codex-doc-node codex-record codex-class"><code class="codex-name">document</code><div class="codex-docstring"><p>A document.</p><p>Metadata is mostly based on
<a href="https://en.wikipedia.org/wiki/Dublin_Core">Dublin Core</a> and the
<a href="https://en.wikipedia.org/wiki/OpenDocument_technical_specification#Metadata">OpenDocument</a>
format.</p></div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">children</code><div class="codex-docstring">The document's children nodes.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">title</code><div class="codex-docstring">The document's title.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">creator</code><div class="codex-docstring">The creator of the document.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">publisher</code><div class="codex-docstring">The document's publisher.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">subject</code><div class="codex-docstring">The subject the document deals with.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">description</code><div class="codex-docstring">A description of the document.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">keywords</code><div class="codex-docstring">A list of strings, each being a keyword for the document.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">reference</code><div class="codex-docstring">A reference string to uniquely identify the
              document within a certain context.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">language</code><div class="codex-docstring">An <a href="http://www.ietf.org/rfc/rfc4646.txt">RFC4646</a> string denoting the language the document is written in.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">rights</code><div class="codex-docstring">Information on the document's copyright.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">version</code><div class="codex-docstring">The document version.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">created-on</code><div class="codex-docstring">The date and time when the document was
               created. By default, this is the date and time at instance
               creation.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">section</code><div class="codex-docstring">Represents a section in the document. Unlike HTML, where a
  section is just another element, sections in CommonDoc contain their contents.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">title</code><div class="codex-docstring">The section title.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">reference</code><div class="codex-docstring">A reference key for this section.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">document-node</code><div class="codex-docstring">The base class of all document classes.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">metadata</code><div class="codex-docstring">Node metadata.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">content-node</code><div class="codex-docstring">A node with children. This is the base class of all nodes
  that have a <code>children</code> slot (Except <code>document</code>, since this class inherits
  from <code>document-node</code>) and can also be used as a way to represent a generic
  grouping of elements. This is useful when building a CommonDoc document by
  parsing some input language.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">children</code><div class="codex-docstring">The node's children.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">text-node</code><div class="codex-docstring">A node representing a bare string of text.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">text</code><div class="codex-docstring">The node's text.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">paragraph</code><div class="codex-docstring">A paragraph.</div><ul class="codex-slot-list"></ul></div><h1 id="inline-nodes">Inline Nodes</h1><div class="codex-doc-node codex-record codex-class"><code class="codex-name">markup</code><div class="codex-docstring">The superclass of all inline markup elements.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">bold</code><div class="codex-docstring">Text in this element is bold.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">italic</code><div class="codex-docstring">Text in this element is italicized.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">underline</code><div class="codex-docstring">Text in this element is underlined.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">strikethrough</code><div class="codex-docstring">Text in this element is striked out.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">code</code><div class="codex-docstring">Text in this element is monospaced or otherwise marked as
  code or computer output.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">superscript</code><div class="codex-docstring">Text in this element is superscripted relative to containing
  elements.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">subscript</code><div class="codex-docstring">Text in this element is subscripted relative to containing
  elements.</div><ul class="codex-slot-list"></ul></div><h1 id="code">Code</h1><div class="codex-doc-node codex-record codex-class"><code class="codex-name">code-block</code><div class="codex-docstring">A block of code.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">language</code><div class="codex-docstring">The language of the code block's contents.</div></li></ul></div><h1 id="quotes">Quotes</h1><div class="codex-doc-node codex-record codex-class"><code class="codex-name">base-quote</code><div class="codex-docstring">The base class of all quotes.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">inline-quote</code><div class="codex-docstring">A quote that occurs inside a paragraph in the document.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">block-quote</code><div class="codex-docstring">A block quote.</div><ul class="codex-slot-list"></ul></div><h1 id="links">Links</h1><div class="codex-doc-node codex-record codex-class"><code class="codex-name">link</code><div class="codex-docstring">The base class for all links, internal and external.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">document-link</code><div class="codex-docstring">A link to a section of this document, to another document and
  optionally a section within that document. See also the <code>reference</code> slot in
  the <code>document</code> class.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">document-reference</code><div class="codex-docstring">A reference key for the linked document.
 If <code>NIL</code>, the link is only to a section within the document.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">section-reference</code><div class="codex-docstring">A reference key for the linked section.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">web-link</code><div class="codex-docstring">An external link.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">uri</code><div class="codex-docstring">The URI of the external resource.</div></li></ul></div><h1 id="lists">Lists</h1><div class="codex-doc-node codex-record codex-class"><code class="codex-name">base-list</code><div class="codex-docstring">The base class of all lists.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">unordered-list</code><div class="codex-docstring">A list where the elements are unordered.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">children</code><div class="codex-docstring">The list of <code>list-item</code> instances.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">ordered-list</code><div class="codex-docstring">A list where the elements are ordered.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">children</code><div class="codex-docstring">The list of <code>list-item</code> instances.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">definition-list</code><div class="codex-docstring">A list of definitions.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">children</code><div class="codex-docstring">The list of <code>definition</code> instances.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">list-item</code><div class="codex-docstring">The item in a non-definition list.</div><ul class="codex-slot-list"></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">definition</code><div class="codex-docstring">An item in a definition list.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">term</code><div class="codex-docstring">The definition term.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">definition</code><div class="codex-docstring">Defines the term.</div></li></ul></div><h1 id="images-&-figures">Images &amp; Figures</h1><div class="codex-doc-node codex-record codex-class"><code class="codex-name">image</code><div class="codex-docstring">An image.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">source</code><div class="codex-docstring">The source where the image is stored.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">description</code><div class="codex-docstring">A plain text description of the image.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">figure</code><div class="codex-docstring">A figure, an image plus an annotation.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">image</code><div class="codex-docstring">The figure's image.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">description</code><div class="codex-docstring">A description of the image.</div></li></ul></div><h1 id="tables">Tables</h1><div class="codex-doc-node codex-record codex-class"><code class="codex-name">table</code><div class="codex-docstring">A table.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">rows</code><div class="codex-docstring">The list of rows in a table.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">row</code><div class="codex-docstring">A row in a table.</div><ul class="codex-slot-list"><li class="codex-slot codex-class-slot"><code class="codex-name">header</code><div class="codex-docstring">The row header.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">footer</code><div class="codex-docstring">The row footer.</div></li><li class="codex-slot codex-class-slot"><code class="codex-name">cells</code><div class="codex-docstring">The cells in the row.</div></li></ul></div><div class="codex-doc-node codex-record codex-class"><code class="codex-name">cell</code><div class="codex-docstring">A cell in a table.</div><ul class="codex-slot-list"></ul></div><h1 id="constructors">Constructors</h1><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-content</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create a content node from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-text</code><code class="codex-lambda-list">(string &amp;key metadata)</code><div class="codex-docstring">Create a text node from the contents of a string.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-paragraph</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create a paragraph node from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-bold</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create a bold node from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-italic</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create an italicized node from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-underline</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create an underlined node from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-strikethrough</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create an striked out node from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-code</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create an inline code node from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-superscript</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create a superscripted node from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-subscript</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create a subscripted node from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-code-block</code><code class="codex-lambda-list">(language children &amp;key metadata)</code><div class="codex-docstring">Create a code block node from its children and language.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-inline-quote</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create an inline quote node from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-block-quote</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create a block quote node from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-document-link</code><code class="codex-lambda-list">(document section children &amp;key metadata)</code><div class="codex-docstring">Create a document link from document and section references and its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-web-link</code><code class="codex-lambda-list">(uri children &amp;key metadata)</code><div class="codex-docstring">Create a web link.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-list-item</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create a list item.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-definition</code><code class="codex-lambda-list">(term definition &amp;key metadata)</code><div class="codex-docstring">Create a definition list item.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-unordered-list</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create an unordered list.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-ordered-list</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create an ordered list.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-definition-list</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create a definition list.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-image</code><code class="codex-lambda-list">(source &amp;key description metadata)</code><div class="codex-docstring">Create an image.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-figure</code><code class="codex-lambda-list">(image description &amp;key metadata)</code><div class="codex-docstring">Create a figure.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-table</code><code class="codex-lambda-list">(rows &amp;key metadata)</code><div class="codex-docstring">Create a table from a list of rows.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-row</code><code class="codex-lambda-list">(cells &amp;key metadata)</code><div class="codex-docstring">Create a row from a list of cells.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-cell</code><code class="codex-lambda-list">(children &amp;key metadata)</code><div class="codex-docstring">Create a cell from its children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-section</code><code class="codex-lambda-list">(title &amp;key children reference metadata)</code><div class="codex-docstring">Create a section from its title and children.</div></div><div class="codex-doc-node codex-operator codex-function"><code class="codex-name">make-document</code><code class="codex-lambda-list">(title &amp;key children keywords &amp;allow-other-keys)</code><div class="codex-docstring">Create a document.</div></div><h1 id="25-examples">Examples</h1><p></p><p>We'll create an example document using the constructor functions:</p><pre><code class="lisp">(in-package :common-doc)

(make-document &quot;My Document&quot;
  :children
  (list
    (make-section (list (make-text &quot;Introduction&quot;))
      :children
      (list
        (make-paragraph
          (list (make-text &quot;...&quot;)))))))</code></pre><p></p><p>We can use the <code>dump</code> function to inspect the structure of this document:</p><pre><code class="lisp">COMMON-DOC&gt; (dump my-doc)
document
  section
    paragraph
      text-node
        &quot;...&quot;</code></pre><p></p><p>Some examples of accessors:</p><pre><code class="lisp">CL-USER&gt; (in-package :common-doc)
#&lt;PACKAGE &quot;COMMON-DOC&quot;&gt;

COMMON-DOC&gt; (text (make-text &quot;Hello, world!&quot;))
&quot;Hello, world!&quot;

COMMON-DOC&gt; (children (make-paragraph
                        (list (make-text &quot;This is &quot;)
                              (make-text &quot;a test&quot;))))
(#&lt;TEXT-NODE text: This is &gt; #&lt;TEXT-NODE text: a test&gt;)

COMMON-DOC&gt; (children (make-paragraph (list (make-text &quot;This is &quot;) (make-text &quot;a test&quot;))))
(#&lt;TEXT-NODE text: This is &gt; #&lt;TEXT-NODE text: a test&gt;)

COMMON-DOC&gt; (make-code-block &quot;lisp&quot; (list (make-text &quot;(progn ...)&quot;)))
#&lt;CODE-BLOCK children: TEXT-NODE&gt;

COMMON-DOC&gt; (language *)
&quot;lisp&quot;

COMMON-DOC&gt; (children **)
(#&lt;TEXT-NODE text: (progn ...)&gt;)</code></pre>
    </main>
  </article>
  <footer>
    <div class="info">
      Created with <a href="https://github.com/CommonDoc/codex">Codex</a>.
    </div>
  </footer>
  <script>
   HighlightLisp.highlight_auto();
  </script>

  </body>
</html>

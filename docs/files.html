<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
  Files &ndash; CommonDoc
</title>
    <link rel="stylesheet" href="static/style.css"/>
    
  <link rel="stylesheet" href="static/highlight.css"/>
  <script src="static/highlight.js"></script>
  <style>
   /* Highlight the current top-level TOC item, and hide the TOC of all other items */

   .toc a[data-node="files"] {
       color: #AD3108;
   }

   .toc ol {
       display: none;
   }

   .toc > ol {
       display: block;
   }

   .toc li a[data-node="files"] + ol {
       display: block;
   }

   .toc li a[data-node="files"] + ol li {
       font-size: 16px;
       margin: 0 10px;
   }

   .toc li a[active] + ol li:first-child {
       margin-top: 5px;
   }
  </style>

  </head>
  <body>
    
  <h1 class="doc-title">CommonDoc Â» Files</h1>
  <article id="article" data-section="files">
    <aside>
      <ol class="toc"><li><a href="overview.html" data-node="overview">Overview</a><ol><li><a href="overview.html#features" data-node="features">Features</a></li><li><a href="overview.html#use-cases" data-node="use-cases">Use Cases</a><ol><li><a href="overview.html#documentation" data-node="documentation">Documentation</a></li><li><a href="overview.html#document-conversion" data-node="document-conversion">Document Conversion</a></li><li><a href="overview.html#wiki" data-node="wiki">Wiki</a></li></ol></li><li><a href="overview.html#motivation" data-node="motivation">Motivation</a></li></ol></li><li><a href="formats.html" data-node="formats">Formats</a><ol><li><a href="formats.html#existing-formats" data-node="existing-formats">Existing Formats</a><ol><li><a href="formats.html#scriba" data-node="scriba">Scriba
<img src="https://travis-ci.org/CommonDoc/scriba.svg?branch=master"/></a><ol><li><a href="formats.html#emacs-mode" data-node="emacs-mode">Emacs Mode</a></li></ol></li><li><a href="formats.html#vertex" data-node="vertex">VerTeX</a></li></ol></li><li><a href="formats.html#defining-formats" data-node="defining-formats">Defining Formats</a><ol><li><a href="formats.html#api" data-node="api">API</a></li><li><a href="formats.html#examples" data-node="examples">Examples</a></li></ol></li></ol></li><li><a href="nodes.html" data-node="nodes">Nodes</a><ol><li><a href="nodes.html#metadata" data-node="metadata">Metadata</a></li><li><a href="nodes.html#basic-classes" data-node="basic-classes">Basic Classes</a></li><li><a href="nodes.html#inline-nodes" data-node="inline-nodes">Inline Nodes</a></li><li><a href="nodes.html#code" data-node="code">Code</a></li><li><a href="nodes.html#quotes" data-node="quotes">Quotes</a></li><li><a href="nodes.html#links" data-node="links">Links</a></li><li><a href="nodes.html#lists" data-node="lists">Lists</a></li><li><a href="nodes.html#images-&-figures" data-node="images-&-figures">Images &amp; Figures</a></li><li><a href="nodes.html#tables" data-node="tables">Tables</a></li><li><a href="nodes.html#constructors" data-node="constructors">Constructors</a></li><li><a href="nodes.html#0-examples" data-node="0-examples">Examples</a></li></ol></li><li><a href="defining-nodes.html" data-node="defining-nodes">Defining Nodes</a><ol><li><a href="defining-nodes.html#1-api" data-node="1-api">API</a></li></ol></li><li><a href="operations.html" data-node="operations">Operations</a><ol><li><a href="operations.html#document-traversal" data-node="document-traversal">Document Traversal</a><ol><li><a href="operations.html#2-examples" data-node="2-examples">Examples</a></li></ol></li><li><a href="operations.html#extraction" data-node="extraction">Extraction</a><ol><li><a href="operations.html#3-examples" data-node="3-examples">Examples</a></li></ol></li><li><a href="operations.html#filling-references" data-node="filling-references">Filling References</a></li><li><a href="operations.html#table-of-contents" data-node="table-of-contents">Table of Contents</a><ol><li><a href="operations.html#4-examples" data-node="4-examples">Examples</a></li></ol></li><li><a href="operations.html#equality" data-node="equality">Equality</a></li></ol></li><li><a href="files.html" data-node="files">Files</a><ol><li><a href="files.html#5-api" data-node="5-api">API</a></li><li><a href="files.html#6-examples" data-node="6-examples">Examples</a></li></ol></li><li><a href="errors.html" data-node="errors">Errors</a></li><li><a href="libraries.html" data-node="libraries">Libraries</a><ol><li><a href="codex.html" data-node="codex">Codex</a></li><li><a href="commonhtml.html" data-node="commonhtml">CommonHTML</a><ol><li><a href="7-examples.html" data-node="7-examples">Examples</a></li></ol></li><li><a href="thorn.html" data-node="thorn">Thorn</a><ol><li><a href="8-examples.html" data-node="8-examples">Examples</a></li></ol></li><li><a href="pandocl.html" data-node="pandocl">Pandocl</a><ol><li><a href="9-examples.html" data-node="9-examples">Examples</a></li></ol></li></ol></li><li><a href="extensions.html" data-node="extensions">Extensions</a><ol><li><a href="plotting-with-gnuplot.html" data-node="plotting-with-gnuplot">Plotting with gnuplot</a><ol><li><a href="10-api.html" data-node="10-api">API</a></li><li><a href="11-examples.html" data-node="11-examples">Examples</a></li></ol></li><li><a href="include-files.html" data-node="include-files">Include Files</a><ol><li><a href="12-api.html" data-node="12-api">API</a></li><li><a href="13-examples.html" data-node="13-examples">Examples</a></li></ol></li><li><a href="split-paragraphs.html" data-node="split-paragraphs">Split Paragraphs</a><ol><li><a href="14-api.html" data-node="14-api">API</a></li><li><a href="15-examples.html" data-node="15-examples">Examples</a></li></ol></li><li><a href="tex.html" data-node="tex">TeX</a><ol><li><a href="16-api.html" data-node="16-api">API</a></li><li><a href="17-examples.html" data-node="17-examples">Examples</a></li></ol></li></ol></li><li><a href="future-work.html" data-node="future-work">Future Work</a></li></ol>
    </aside>
    <main class="codex-section">
      <p>Documents are hardly ever self-contained, and references to external resources
are necessary and useful for the following reasons:</p><ol><li>We don't want to have to load images to memory just to represent the
document, and then have to write those images to base-64 when writing the
document to an output format.</li><li>External resources can reduce errors. For instance, if we're writing an
article detailing the internals of a piece of code, we can keep the code in an
external file (along with a script to test it), and simply include bits of it
using the very flexible
<a href="https://github.com/CommonDoc/common-doc/tree/master/contrib/include"><code>include</code></a>
contrib. Then, changes to the file will be automatically reflected in the
document, reducing duplication and removing the need to manually synchronize
contents.</li><li>Just about every markup format supports at least referencing images both
on the local filesystem and on the web, so we have to support that if we are to
support that markup.</li></ol><p>CommonDoc has simple support for doing operations with external files. There's a
special variable, <code>*base-directory*</code>, which basically the directory where all
relative pathnames referenced in the document begin. Once that variable is
bound, a couple of functions can be used to manipulate pathnames.</p><h1 id="5-api">API</h1><p>
<div class="codex-doc-node codex-variable"><code class="codex-name">*base-directory*</code><div class="codex-docstring">The directory all resources with relative paths are based from. This is
intended to be bound by a <code>let</code> by specific input formats.</div></div>
<div class="codex-doc-node codex-operator codex-function"><code class="codex-name">absolute-path</code><code class="codex-lambda-list">(pathname-or-string)</code><div class="codex-docstring">Take a pathname or namestring. If it's absolute, return it, otherwise, merge
it with <code>*base-directory*</code>.</div></div>
<div class="codex-doc-node codex-operator codex-function"><code class="codex-name">relativize-pathname</code><code class="codex-lambda-list">(pathname)</code><div class="codex-docstring">If a pathname is inside <code>*base-directory*</code>, return a relative
pathname. Otherwise, return the pathname unchanged.</div></div>
</p><h1 id="6-examples">Examples</h1><pre><code class="lisp">(in-package :common-doc.file)(let ((*base-directory* (user-homedir-pathname)))
  (absolute-path #p&quot;directory/file.txt&quot;))
;; =&gt; #p&quot;/home/eudoxia/directory/file.txt&quot;

</code></pre>
    </main>
  </article>
  <footer>
    <div class="info">
      Created with <a href="https://github.com/CommonDoc/codex">Codex</a>.
    </div>
  </footer>
  <script>
   HighlightLisp.highlight_auto();
  </script>

  </body>
</html>
